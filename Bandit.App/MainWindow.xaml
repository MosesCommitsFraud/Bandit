<Window x:Class="Bandit.App.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Bandit" Height="750" Width="1200"
        AllowDrop="True"
        Drop="Window_Drop"
        DragOver="Window_DragOver"
        WindowStyle="None"
        AllowsTransparency="True"
        ResizeMode="CanResizeWithGrip"
        Background="Transparent"
        Icon="Assets/logo-white.png">
  <Border BorderBrush="{StaticResource BorderColor}" 
          BorderThickness="1" 
          CornerRadius="12"
          Background="{StaticResource BackgroundDark}">
    <DockPanel ClipToBounds="False">
      <!-- Custom Title Bar -->
      <Border DockPanel.Dock="Top" 
              Background="{StaticResource BackgroundMedium}"
              CornerRadius="12,12,0,0"
              MouseLeftButtonDown="TitleBar_MouseLeftButtonDown">
        <Grid Height="40">
          <Grid.ColumnDefinitions>
            <ColumnDefinition Width="*"/>
            <ColumnDefinition Width="Auto"/>
          </Grid.ColumnDefinitions>
          <StackPanel Orientation="Horizontal" VerticalAlignment="Center" Margin="12,0">
            <Image Source="Assets/logo-white.png" 
                   Width="24" 
                   Height="24" 
                   Margin="0,0,8,0"
                   RenderOptions.BitmapScalingMode="HighQuality"/>
            <TextBlock Text="Bandit" 
                       VerticalAlignment="Center"
                       FontSize="16"
                       FontWeight="SemiBold"
                       Foreground="{StaticResource TextPrimary}"/>
          </StackPanel>
          <StackPanel Grid.Column="1" Orientation="Horizontal" Margin="0,0,8,0">
            <!-- Minimize Button -->
            <Border Width="32" 
                    Height="32"
                    Margin="4"
                    CornerRadius="6"
                    Background="Transparent"
                    Cursor="Hand"
                    MouseLeftButtonDown="Minimize_Click">
              <Border.Style>
                <Style TargetType="Border">
                  <Setter Property="Background" Value="Transparent"/>
                  <Style.Triggers>
                    <Trigger Property="IsMouseOver" Value="True">
                      <Setter Property="Background" Value="{StaticResource BackgroundLight}"/>
                    </Trigger>
                  </Style.Triggers>
                </Style>
              </Border.Style>
              <Path Data="M 8,16 L 24,16" 
                    Stroke="{StaticResource TextSecondary}" 
                    StrokeThickness="2"
                    Stretch="Uniform"
                    Width="16"
                    Height="16"/>
            </Border>
            
            <!-- Maximize Button -->
            <Border Width="32" 
                    Height="32"
                    Margin="4"
                    CornerRadius="6"
                    Background="Transparent"
                    Cursor="Hand"
                    MouseLeftButtonDown="Maximize_Click">
              <Border.Style>
                <Style TargetType="Border">
                  <Setter Property="Background" Value="Transparent"/>
                  <Style.Triggers>
                    <Trigger Property="IsMouseOver" Value="True">
                      <Setter Property="Background" Value="{StaticResource BackgroundLight}"/>
                    </Trigger>
                  </Style.Triggers>
                </Style>
              </Border.Style>
              <Path Data="M 8,8 L 24,8 L 24,24 L 8,24 Z" 
                    Stroke="{StaticResource TextSecondary}" 
                    StrokeThickness="2"
                    Fill="Transparent"
                    Stretch="Uniform"
                    Width="14"
                    Height="14"/>
            </Border>
            
            <!-- Close Button -->
            <Border Width="32" 
                    Height="32"
                    Margin="4"
                    CornerRadius="6"
                    Background="Transparent"
                    Cursor="Hand"
                    MouseLeftButtonDown="Exit_Click">
              <Border.Style>
                <Style TargetType="Border">
                  <Setter Property="Background" Value="Transparent"/>
                  <Style.Triggers>
                    <Trigger Property="IsMouseOver" Value="True">
                      <Setter Property="Background" Value="{StaticResource AccentDanger}"/>
                    </Trigger>
                  </Style.Triggers>
                </Style>
              </Border.Style>
              <Path x:Name="closePath"
                    Data="M 10,10 L 22,22 M 22,10 L 10,22" 
                    Stroke="{StaticResource TextSecondary}" 
                    StrokeThickness="2"
                    Stretch="Uniform"
                    Width="14"
                    Height="14">
                <Path.Style>
                  <Style TargetType="Path">
                    <Style.Triggers>
                      <DataTrigger Binding="{Binding IsMouseOver, RelativeSource={RelativeSource AncestorType=Border}}" Value="True">
                        <Setter Property="Stroke" Value="{StaticResource TextPrimary}"/>
                      </DataTrigger>
                    </Style.Triggers>
                  </Style>
                </Path.Style>
              </Path>
            </Border>
          </StackPanel>
        </Grid>
      </Border>

      <!-- Menu Bar -->
      <Menu DockPanel.Dock="Top" Padding="8,4">
        <MenuItem Header="File" StaysOpenOnClick="True">
          <MenuItem Header="Open Downloads Folder" Command="{Binding OpenFolderCommand}"/>
          <Separator/>
          <MenuItem Header="Exit" Click="Exit_Click"/>
        </MenuItem>
        <MenuItem Header="Edit" StaysOpenOnClick="True">
          <MenuItem Header="Add Sound..." Command="{Binding AddSoundCommand}"/>
          <MenuItem Header="Clear All Sounds" Command="{Binding ClearAllCommand}"/>
        </MenuItem>
        <MenuItem Header="View" StaysOpenOnClick="True">
          <MenuItem Header="Refresh Sounds" Command="{Binding RefreshCommand}" ToolTip="Reload all sounds from folder"/>
        </MenuItem>
        <MenuItem Header="Help" StaysOpenOnClick="True">
          <MenuItem Header="About" Click="About_Click"/>
        </MenuItem>
      </Menu>

      <!-- Media Player Control Bar -->
      <Border DockPanel.Dock="Bottom"
              Background="{StaticResource BackgroundMedium}"
              BorderBrush="{StaticResource BorderColor}"
              BorderThickness="0,1,0,0"
              Padding="20,16">
        <Grid>
          <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
          </Grid.RowDefinitions>

          <!-- Timeline and Position -->
          <Grid Margin="0,0,0,12">
            <Grid.ColumnDefinitions>
              <ColumnDefinition Width="Auto"/>
              <ColumnDefinition Width="*"/>
              <ColumnDefinition Width="Auto"/>
            </Grid.ColumnDefinitions>

            <!-- Current Position -->
            <TextBlock Text="{Binding AudioService.Position, StringFormat='{}{0:mm\\:ss}'}"
                       Foreground="{StaticResource TextSecondary}"
                       FontSize="12"
                       FontFamily="Consolas"
                       VerticalAlignment="Center"
                       Margin="0,0,8,0"/>

            <!-- Timeline Slider -->
            <Slider Grid.Column="1"
                    Minimum="0"
                    Maximum="{Binding AudioService.DurationSeconds}"
                    Value="{Binding AudioService.PositionSeconds, Mode=TwoWay}"
                    VerticalAlignment="Center"
                    Margin="8,0"
                    Height="24">
              <Slider.Resources>
                <Style x:Key="SliderThumbStyle" TargetType="Thumb">
                  <Setter Property="Template">
                    <Setter.Value>
                      <ControlTemplate TargetType="Thumb">
                        <Ellipse Width="14" Height="14"
                                 Fill="{StaticResource TextPrimary}"
                                 Stroke="{StaticResource AccentPrimary}"
                                 StrokeThickness="2"/>
                      </ControlTemplate>
                    </Setter.Value>
                  </Setter>
                </Style>
              </Slider.Resources>
              <Slider.Style>
                <Style TargetType="Slider">
                  <Setter Property="Template">
                    <Setter.Value>
                      <ControlTemplate TargetType="Slider">
                        <Grid>
                          <Border Background="{StaticResource BackgroundLight}"
                                  Height="6"
                                  CornerRadius="3"
                                  VerticalAlignment="Center"/>
                          <Track x:Name="PART_Track">
                            <Track.DecreaseRepeatButton>
                              <RepeatButton Command="Slider.DecreaseLarge" Opacity="0"/>
                            </Track.DecreaseRepeatButton>
                            <Track.IncreaseRepeatButton>
                              <RepeatButton Command="Slider.IncreaseLarge" Opacity="0"/>
                            </Track.IncreaseRepeatButton>
                            <Track.Thumb>
                              <Thumb Style="{StaticResource SliderThumbStyle}"/>
                            </Track.Thumb>
                          </Track>
                        </Grid>
                      </ControlTemplate>
                    </Setter.Value>
                  </Setter>
                </Style>
              </Slider.Style>
            </Slider>

            <!-- Total Duration -->
            <TextBlock Grid.Column="2"
                       Text="{Binding AudioService.Duration, StringFormat='{}{0:mm\\:ss}'}"
                       Foreground="{StaticResource TextSecondary}"
                       FontSize="12"
                       FontFamily="Consolas"
                       VerticalAlignment="Center"
                       Margin="8,0,0,0"/>
          </Grid>

          <!-- Controls, Volumes, and Device Selection -->
          <Grid Grid.Row="1">
            <Grid.ColumnDefinitions>
              <ColumnDefinition Width="Auto"/>
              <ColumnDefinition Width="*"/>
              <ColumnDefinition Width="Auto"/>
            </Grid.ColumnDefinitions>

            <!-- Playback Controls -->
            <StackPanel Orientation="Horizontal" Margin="0,0,20,0">
              <Button Command="{Binding PlayPauseCommand}"
                      Width="40"
                      Height="40"
                      Padding="0"
                      Margin="0,0,8,0"
                      ToolTip="Play/Pause">
                <TextBlock Text="{Binding AudioService.IsPlaying, Converter={StaticResource PlayPauseConverter}}"
                           FontSize="16"
                           FontFamily="Segoe UI Emoji, Segoe UI Symbol, Arial"
                           HorizontalAlignment="Center"
                           VerticalAlignment="Center"/>
              </Button>
              <Button Command="{Binding StopCommand}"
                      Width="40"
                      Height="40"
                      Padding="0"
                      Style="{StaticResource SecondaryButton}"
                      ToolTip="Stop">
                <TextBlock Text="⏹"
                           FontSize="16"
                           FontFamily="Segoe UI Emoji, Segoe UI Symbol, Arial"
                           HorizontalAlignment="Center"
                           VerticalAlignment="Center"/>
              </Button>
            </StackPanel>

            <!-- Now Playing Info -->
            <StackPanel Grid.Column="1"
                        VerticalAlignment="Center"
                        HorizontalAlignment="Center">
              <TextBlock Text="{Binding AudioService.CurrentFile, Converter={StaticResource FileNameConverter}}"
                         Foreground="{StaticResource TextPrimary}"
                         FontWeight="SemiBold"
                         FontSize="13"
                         TextTrimming="CharacterEllipsis"
                         HorizontalAlignment="Center"
                         MaxWidth="400">
                <TextBlock.Style>
                  <Style TargetType="TextBlock">
                    <Style.Triggers>
                      <DataTrigger Binding="{Binding AudioService.CurrentFile}" Value="">
                        <Setter Property="Text" Value="No audio playing"/>
                        <Setter Property="Foreground" Value="{StaticResource TextSecondary}"/>
                        <Setter Property="FontWeight" Value="Normal"/>
                        <Setter Property="FontStyle" Value="Italic"/>
                      </DataTrigger>
                    </Style.Triggers>
                  </Style>
                </TextBlock.Style>
              </TextBlock>
            </StackPanel>

            <!-- Volume and Device Selection -->
            <StackPanel Grid.Column="2" Orientation="Horizontal">
              <!-- Output Volume (Primary Output - for virtual mic/streaming) -->
              <StackPanel Orientation="Horizontal" Margin="0,0,20,0">
                <TextBlock Text="🎤"
                           FontSize="16"
                           FontFamily="Segoe UI Emoji, Segoe UI Symbol, Arial"
                           VerticalAlignment="Center"
                           Margin="0,0,8,0"
                           ToolTip="Primary Output (use virtual cable for mic input in Discord/OBS)"/>
                <ComboBox ItemsSource="{Binding AudioService.OutputDevices}"
                          SelectedIndex="{Binding AudioService.OutputDeviceIndex}"
                          Width="150"
                          Height="32"
                          Margin="0,0,8,0"
                          VerticalContentAlignment="Center"
                          ToolTip="Primary output device (e.g., virtual cable for streaming)"/>
                <TextBlock Text="🔊"
                           FontSize="14"
                           FontFamily="Segoe UI Emoji, Segoe UI Symbol, Arial"
                           VerticalAlignment="Center"
                           Margin="0,0,4,0"/>
                <Slider Minimum="0"
                        Maximum="100"
                        Value="{Binding AudioService.OutputVolume, Converter={StaticResource VolumeConverter}}"
                        Width="80"
                        Height="20"
                        VerticalAlignment="Center"
                        ToolTip="Output Volume">
                  <Slider.Style>
                    <Style TargetType="Slider">
                      <Setter Property="Template">
                        <Setter.Value>
                          <ControlTemplate TargetType="Slider">
                            <Grid>
                              <Border Background="{StaticResource BackgroundLight}"
                                      Height="4"
                                      CornerRadius="2"
                                      VerticalAlignment="Center"/>
                              <Track x:Name="PART_Track">
                                <Track.DecreaseRepeatButton>
                                  <RepeatButton Command="Slider.DecreaseLarge" Opacity="0"/>
                                </Track.DecreaseRepeatButton>
                                <Track.IncreaseRepeatButton>
                                  <RepeatButton Command="Slider.IncreaseLarge" Opacity="0"/>
                                </Track.IncreaseRepeatButton>
                                <Track.Thumb>
                                  <Thumb>
                                    <Thumb.Template>
                                      <ControlTemplate TargetType="Thumb">
                                        <Ellipse Width="12" Height="12"
                                                 Fill="{StaticResource AccentPrimary}"
                                                 Stroke="{StaticResource TextPrimary}"
                                                 StrokeThickness="2"/>
                                      </ControlTemplate>
                                    </Thumb.Template>
                                  </Thumb>
                                </Track.Thumb>
                              </Track>
                            </Grid>
                          </ControlTemplate>
                        </Setter.Value>
                      </Setter>
                    </Style>
                  </Slider.Style>
                </Slider>
                <TextBlock Text="{Binding AudioService.OutputVolume, StringFormat='{}{0:P0}'}"
                           Foreground="{StaticResource TextSecondary}"
                           FontSize="11"
                           VerticalAlignment="Center"
                           Width="35"
                           TextAlignment="Right"
                           Margin="4,0,0,0"/>
              </StackPanel>

              <!-- Monitor Volume (Secondary Output - for personal monitoring) -->
              <StackPanel Orientation="Horizontal">
                <TextBlock Text="🎧"
                           FontSize="16"
                           FontFamily="Segoe UI Emoji, Segoe UI Symbol, Arial"
                           VerticalAlignment="Center"
                           Margin="0,0,8,0"
                           ToolTip="Monitor Output (hear the audio yourself)"/>
                <ComboBox ItemsSource="{Binding AudioService.OutputDevices}"
                          SelectedIndex="{Binding AudioService.MonitorDeviceIndex}"
                          Width="150"
                          Height="32"
                          Margin="0,0,8,0"
                          VerticalContentAlignment="Center"
                          ToolTip="Monitor device (e.g., your headphones/speakers to hear playback)"/>
                <TextBlock Text="🔊"
                           FontSize="14"
                           FontFamily="Segoe UI Emoji, Segoe UI Symbol, Arial"
                           VerticalAlignment="Center"
                           Margin="0,0,4,0"/>
                <Slider Minimum="0"
                        Maximum="100"
                        Value="{Binding AudioService.MonitorVolume, Converter={StaticResource VolumeConverter}}"
                        Width="80"
                        Height="20"
                        VerticalAlignment="Center"
                        ToolTip="Monitor Volume">
                  <Slider.Style>
                    <Style TargetType="Slider">
                      <Setter Property="Template">
                        <Setter.Value>
                          <ControlTemplate TargetType="Slider">
                            <Grid>
                              <Border Background="{StaticResource BackgroundLight}"
                                      Height="4"
                                      CornerRadius="2"
                                      VerticalAlignment="Center"/>
                              <Track x:Name="PART_Track">
                                <Track.DecreaseRepeatButton>
                                  <RepeatButton Command="Slider.DecreaseLarge" Opacity="0"/>
                                </Track.DecreaseRepeatButton>
                                <Track.IncreaseRepeatButton>
                                  <RepeatButton Command="Slider.IncreaseLarge" Opacity="0"/>
                                </Track.IncreaseRepeatButton>
                                <Track.Thumb>
                                  <Thumb>
                                    <Thumb.Template>
                                      <ControlTemplate TargetType="Thumb">
                                        <Ellipse Width="12" Height="12"
                                                 Fill="{StaticResource AccentPrimary}"
                                                 Stroke="{StaticResource TextPrimary}"
                                                 StrokeThickness="2"/>
                                      </ControlTemplate>
                                    </Thumb.Template>
                                  </Thumb>
                                </Track.Thumb>
                              </Track>
                            </Grid>
                          </ControlTemplate>
                        </Setter.Value>
                      </Setter>
                    </Style>
                  </Slider.Style>
                </Slider>
                <TextBlock Text="{Binding AudioService.MonitorVolume, StringFormat='{}{0:P0}'}"
                           Foreground="{StaticResource TextSecondary}"
                           FontSize="11"
                           VerticalAlignment="Center"
                           Width="35"
                           TextAlignment="Right"
                           Margin="4,0,0,0"/>
              </StackPanel>
            </StackPanel>
          </Grid>
        </Grid>
      </Border>

      <!-- Main Content -->
      <Grid Margin="20" ClipToBounds="False">
        <Grid.RowDefinitions>
          <RowDefinition Height="Auto"/>
          <RowDefinition Height="Auto"/>
          <RowDefinition Height="*"/>
        </Grid.RowDefinitions>

        <!-- Download Section -->
        <Border Background="{StaticResource BackgroundMedium}"
                BorderBrush="{StaticResource BorderColor}"
                BorderThickness="1"
                CornerRadius="12"
                Padding="12"
                Margin="0,0,0,12">
          <StackPanel>
            <TextBlock Text="Download from YouTube" 
                       FontSize="14" 
                       FontWeight="SemiBold" 
                       Margin="0,0,0,8"
                       Foreground="{StaticResource TextPrimary}"/>
            <Grid>
              <Grid.ColumnDefinitions>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="Auto"/>
              </Grid.ColumnDefinitions>
              <TextBox Text="{Binding Url, UpdateSourceTrigger=PropertyChanged}" 
                       ToolTip="Enter YouTube URL (audio will be extracted automatically) or drag audio files into the window"
                       Height="32"
                       Cursor="IBeam"
                       VerticalContentAlignment="Center"
                       Padding="8,4"
                       IsEnabled="{Binding IsDownloading, Converter={StaticResource InverseBoolConverter}}"/>
              <Button Content="Download Audio" 
                      Command="{Binding DownloadCommand}" 
                      Grid.Column="1"
                      Margin="8,0,0,0"
                      Padding="16,6"
                      Height="32"
                      IsEnabled="{Binding IsDownloading, Converter={StaticResource InverseBoolConverter}}"/>
            </Grid>
            
            <!-- Progress Indicator -->
            <Border Visibility="{Binding IsDownloading, Converter={StaticResource BoolToVisibilityConverter}}"
                    Background="{StaticResource BackgroundLight}"
                    CornerRadius="6"
                    Padding="10,8"
                    Margin="0,8,0,0">
              <StackPanel Orientation="Horizontal">
                <TextBlock Text="⏳" 
                           FontSize="14"
                           FontFamily="Segoe UI Emoji, Segoe UI Symbol, Arial"
                           Margin="0,0,8,0"
                           VerticalAlignment="Center"/>
                <TextBlock Text="{Binding DownloadProgress}" 
                           Foreground="{StaticResource AccentPrimary}"
                           FontSize="12"
                           FontWeight="Medium"
                           VerticalAlignment="Center"
                           TextWrapping="Wrap"/>
              </StackPanel>
            </Border>
            
            <!-- Success/Error Message -->
            <TextBlock Text="{Binding DownloadProgress}"
                       Visibility="{Binding IsDownloading, Converter={StaticResource InverseBoolToVisibilityConverter}}"
                       Foreground="{StaticResource AccentSecondary}"
                       FontSize="12"
                       Margin="0,8,0,0"
                       TextWrapping="Wrap">
              <TextBlock.Style>
                <Style TargetType="TextBlock">
                  <Style.Triggers>
                    <DataTrigger Binding="{Binding DownloadProgress}" Value="">
                      <Setter Property="Visibility" Value="Collapsed"/>
                    </DataTrigger>
                  </Style.Triggers>
                </Style>
              </TextBlock.Style>
            </TextBlock>
          </StackPanel>
        </Border>

        <!-- Toolbar Section -->
        <Border Grid.Row="1"
                Background="{StaticResource BackgroundMedium}"
                BorderBrush="{StaticResource BorderColor}"
                BorderThickness="1"
                CornerRadius="12"
                Padding="10"
                Margin="0,0,0,12">
          <Grid>
            <StackPanel Orientation="Horizontal">
              <Button Command="{Binding AddSoundCommand}" 
                      Padding="12,6"
                      Style="{StaticResource SecondaryButton}">
                <TextBlock FontFamily="Segoe UI Emoji, Segoe UI Symbol, Arial">
                  <Run Text="➕"/> <Run Text="Add Sound"/>
                </TextBlock>
              </Button>
            </StackPanel>
            <StackPanel Orientation="Horizontal" HorizontalAlignment="Right">
              <TextBlock VerticalAlignment="Center">
                <Run Text="Total Sounds:" Foreground="{StaticResource TextSecondary}"/>
                <Run Text="{Binding Sounds.Count, Mode=OneWay}" 
                     FontWeight="Bold" 
                     FontSize="14"
                     Foreground="{StaticResource AccentPrimary}"/>
              </TextBlock>
            </StackPanel>
          </Grid>
        </Border>

        <!-- Sounds Grid - Card Layout like sketch -->
        <ScrollViewer Grid.Row="2" 
                      VerticalScrollBarVisibility="Auto" 
                      HorizontalScrollBarVisibility="Disabled"
                      Background="Transparent"
                      ClipToBounds="False"
                      Padding="10">
          <ItemsControl ItemsSource="{Binding Sounds}" ClipToBounds="False">
            <ItemsControl.ItemsPanel>
              <ItemsPanelTemplate>
                <WrapPanel Orientation="Horizontal" ClipToBounds="False"/>
              </ItemsPanelTemplate>
            </ItemsControl.ItemsPanel>
            <ItemsControl.ItemTemplate>
              <DataTemplate>
                <Border Background="{StaticResource CardBackground}"
                        BorderBrush="{StaticResource BorderColor}"
                        BorderThickness="1"
                        CornerRadius="12"
                        Padding="0"
                        Margin="16"
                        Width="280"
                        Height="260">
                  <Border.Effect>
                    <DropShadowEffect Color="Black" Opacity="0.4" BlurRadius="12" ShadowDepth="4"/>
                  </Border.Effect>
                  <Border.Style>
                    <Style TargetType="Border">
                      <Setter Property="BorderThickness" Value="1"/>
                      <Style.Triggers>
                        <Trigger Property="IsMouseOver" Value="True">
                          <Setter Property="BorderBrush" Value="{StaticResource AccentPrimary}"/>
                          <Setter Property="BorderThickness" Value="2"/>
                          <Setter Property="Background" Value="{StaticResource BackgroundMedium}"/>
                          <Setter Property="Effect">
                            <Setter.Value>
                              <DropShadowEffect Color="#A78BFA" Opacity="0.95" BlurRadius="30" ShadowDepth="0" RenderingBias="Quality"/>
                            </Setter.Value>
                          </Setter>
                        </Trigger>
                      </Style.Triggers>
                    </Style>
                  </Border.Style>
                  <Grid>
                    <Grid.RowDefinitions>
                      <RowDefinition Height="140"/>
                      <RowDefinition Height="*"/>
                    </Grid.RowDefinitions>
                    
                    <!-- Image/Thumbnail Area -->
                    <Border Background="{StaticResource BackgroundLight}"
                            CornerRadius="12,12,0,0">
                      <Viewbox Width="80" Height="80">
                        <TextBlock Text="🎵" 
                                   FontSize="64"
                                   FontFamily="Segoe UI Emoji, Segoe UI Symbol, Arial"
                                   HorizontalAlignment="Center"
                                   VerticalAlignment="Center"
                                   Foreground="{StaticResource AccentSecondary}"/>
                      </Viewbox>
                    </Border>
                    
                    <!-- Info Area -->
                    <StackPanel Grid.Row="1" Margin="16,12,16,12">
                      <TextBlock Text="{Binding DisplayName}" 
                                 FontWeight="SemiBold" 
                                 FontSize="15"
                                 TextTrimming="CharacterEllipsis" 
                                 ToolTip="{Binding DisplayName}"
                                 Foreground="{StaticResource TextPrimary}"
                                 Margin="0,0,0,4"/>
                      <TextBlock Text="{Binding HotkeyLabel}" 
                                 Foreground="{StaticResource TextSecondary}"
                                 FontSize="11" 
                                 Margin="0,0,0,10"/>
                      <Grid>
                        <Grid.ColumnDefinitions>
                          <ColumnDefinition Width="*"/>
                          <ColumnDefinition Width="Auto"/>
                          <ColumnDefinition Width="Auto"/>
                        </Grid.ColumnDefinitions>
                        <Button Command="{Binding PlayCommand}" 
                                Padding="8,6"
                                FontWeight="SemiBold"
                                Width="36"
                                Height="32"
                                HorizontalAlignment="Left">
                          <TextBlock Text="▶" 
                                     FontSize="12"
                                     FontFamily="Segoe UI Emoji, Segoe UI Symbol, Arial"/>
                        </Button>
                        <Button Command="{Binding BindCommand}" 
                                Grid.Column="1"
                                Padding="8,6"
                                Width="36"
                                Height="32"
                                Margin="4,0,0,0"
                                Style="{StaticResource SecondaryButton}">
                          <TextBlock Text="⌨" 
                                     FontSize="12"
                                     FontFamily="Segoe UI Emoji, Segoe UI Symbol, Arial"/>
                        </Button>
                        <Button Command="{Binding RemoveCommand}" 
                                Grid.Column="2"
                                Padding="8,6"
                                Width="36"
                                Height="32"
                                Margin="4,0,0,0"
                                Style="{StaticResource DangerButton}">
                          <TextBlock Text="🗑" 
                                     FontSize="12"
                                     FontFamily="Segoe UI Emoji, Segoe UI Symbol, Arial"/>
                        </Button>
                      </Grid>
                    </StackPanel>
                  </Grid>
                </Border>
              </DataTemplate>
            </ItemsControl.ItemTemplate>
          </ItemsControl>
        </ScrollViewer>
      </Grid>
    </DockPanel>
  </Border>
</Window>
